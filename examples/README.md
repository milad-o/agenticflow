# Examples

This directory contains self-contained, runnable examples that demonstrate AgenticFlow’s capabilities. Each example follows the same structure and conventions for clarity and maintainability.

## Structure and conventions

- One entrypoint per example: `demo.py`
  - Object-oriented runner with parameters set in a `Config` dataclass inside the script
  - No CLI flags required (you can still add optional flags locally if needed, but prefer in-script params)
- Data vs artifacts
  - `data/` holds inputs used by the example (small, committed sample data is OK)
  - `artifacts/` holds outputs generated by the example (diagrams, reports, etc.)
- Shared utilities
  - `examples/utils/` is for dev-only helpers (e.g., provider_factory.py)
  - Broadly useful building blocks belong in the framework (e.g., agenticflow.agents.utilities)
- Namespacing and imports
  - Do not place example modules inside the `agenticflow` package
  - Example code should import from the framework (agenticflow.*) and from examples/utils when needed
- Always run with uv
  - Use uv for isolated runs and tests (no environment pollution)
  - Prefer provider-free defaults (e.g., `AGENTICFLOW_LLM_PROVIDER=noop`) for demos that can use LLMs

## Current examples

- 01_file_qna
  - Ask questions over local files with an LLM (or provider-free noop)
  - data/: sample corpus; artifacts/: QA answer, citations, diagrams
  - Run: `AGENTICFLOW_LLM_PROVIDER=noop uv run python examples/01_file_qna/demo.py`
- 02_sales_workflow
  - Two-agent CSV pipeline: analyze totals, then render a report
  - data/: sales.csv; artifacts/: analysis.json, report.md, diagrams
  - Run: `uv run python examples/02_sales_workflow/demo.py`
- 03_group_chat
  - Static multi-round group chat among local agents; optional ToolAgents
  - data/: (placeholder) no inputs required; artifacts/: diagrams
  - Run: `uv run python examples/03_group_chat/demo.py --participants analyst reporter --rounds 2 --topic "Plan Q2" --store sqlite --outdir examples/03_group_chat/artifacts`
- 04_tools_pipeline
  - ToolAgent(fs_read) + StatsAgent + ReportAgent pipeline with diagrams
  - data/: input.txt; artifacts/: stats.json, report.md, diagrams
  - Run: `uv run python examples/04_tools_pipeline/demo.py`
- 05_local_docs
  - Scan and summarize local text files with citations
  - data/: sample docs; artifacts/: summary.md, diagrams
  - Run: `uv run python examples/05_local_docs/demo.py`

## How to add a new example (maintainer guide)

1) Create a numbered folder: `examples/06_my_example`
- Add `data/` (small committed inputs) and an empty `artifacts/`
- Create `demo.py` with:
  - A `Config` dataclass for in-script parameters
  - Agents/Tools wired into an `Orchestrator` (consider `emit_workflow_started=True` to enable diagrams)
  - A `build_workflow()` that returns a `WorkflowDefinition`
  - A `run()` that executes the workflow and renders diagrams via `VisualizationRenderer`

2) Prefer framework utilities over custom code
- Reuse `agenticflow.agents.utilities` (e.g., StatsAgent, ReportAgent, ScanAgent, SummarizeAgent) and `agenticflow.agents.tool_agent` with built-in tools where appropriate
- If you find yourself duplicating patterns across examples, promote them into reusable framework utilities (inside `agenticflow`) rather than copying them into each example
- Keep dev-only helpers in `examples/utils` (e.g., provider creation from env)

3) Safety and policies
- Use allowlists and sane defaults (e.g., FSReadTool roots limited to the repo)
- Do not include secrets in code or outputs; follow the repo’s secrets guidance (use environment variables only, never echo values)
- For LLM examples, default to `AGENTICFLOW_LLM_PROVIDER=noop` to ensure provider-free runs; document how to enable real providers

4) Documentation and sample data
- Add or update the example’s local README.md to explain:
  - What it does
  - The `data/` vs `artifacts/` split
  - A one-liner uv command to run it
  - How to customize inputs via `Config`
- Provide small, representative data under `data/` when helpful

5) Quality checks
- Run tests: `PYTHONPATH=. uv run pytest -q --ignore=tests/integration`
- Run each new/changed example: `uv run python examples/XX_name/demo.py`
- If diagrams require Graphviz `dot`, gracefully degrade when unavailable

## How to refactor an existing example

- Consolidate to a single `demo.py` and remove other redundant scripts
- Move inputs to `data/` and generate outputs in `artifacts/`
- Replace custom one-off code with framework utilities where sensible
- Update the README and verify with uv runs and the test suite

## When to promote example logic into the framework

Promote logic from examples into `agenticflow` when:
- It’s clearly reusable in multiple scenarios (e.g., topology helpers, common agents)
- It improves developer ergonomics without embedding example-specific opinions
- It can be tested and documented as a stable utility

Keep logic in `examples/utils` when:
- It’s demo-only or environment-specific glue (e.g., provider factories that depend on local setup)

## Notes

- Integration tests live in `tests/integration` and may rely on external services; keep example demos provider-free by default
- For multi-agent topologies and group chat supervisors, use or extend `agenticflow.orchestration.topologies` and supervisor utilities
- The numeric prefix in example folder names indicates suggested reading order
