# Example 03: Local Group Chat (multi-agent)

See also these OOP demos:
- examples.api.tools_pipeline.ToolsPipelineDemo — file stats pipeline with diagrams
- examples.api.local_docs.LocalDocsSummaryDemo — summarize local text files with citations

This example builds a static multi-round group chat workflow among local agents and demonstrates:
- Building a chat DAG with GroupChatSupervisor
- Executing locally with the Orchestrator (with optional SQLite persistence)
- Rendering workflow and system diagrams (Mermaid and DOT), with optional SVG if Graphviz `dot` is available
- Optional: register ToolAgents and auto-include their tools in the system diagram via `--with-tools`

## Programmatic usage

Use the object-oriented API (no CLI flags required):

```python
from pathlib import Path
from examples.api.group_chat import GroupChatDemo

# Configure your demo scenario in code
chat = GroupChatDemo(
    participants=["analyst", "reporter"],
    rounds=2,
    topic="Plan Q2 initiatives",
    outdir=Path("examples/03_group_chat/artifacts"),
    store_kind="sqlite",
    db_path=Path("examples/03_group_chat/events.sqlite3"),
    with_tools=True,  # enable ToolAgents with fs_read and http_fetch
)

# Run and render workflow+system diagrams
result = await chat.run()
print(result)
```

## Structure
- data/: inputs used by the example (currently none required; placeholder)
- artifacts/: outputs generated by the run (diagrams, etc.)

## Run

Chat with two participants for 2 rounds, persist to SQLite, and write diagrams:
```bash
uv run python examples/03_group_chat/demo.py \
  --participants analyst reporter \
  --rounds 2 \
  --topic "Plan Q2 initiatives" \
  --store sqlite --db-path examples/03_group_chat/events.sqlite3 \
  --outdir examples/03_group_chat/artifacts
```

Outputs:
- Workflow Mermaid: artifacts/workflow.mmd
- System Mermaid: artifacts/system.mmd
- System DOT: artifacts/system.dot
- If Graphviz is installed, also writes artifacts/system.svg
